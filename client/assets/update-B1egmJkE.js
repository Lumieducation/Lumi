import{ai as f,R as o,ab as j,a as k,u as v,a9 as C,s as i,j as e,aj as c,ac as b}from"./index-BWeaNkSN.js";import{d as y}from"./Update-dTZM050t.js";import{P}from"./page-DrCQMP-v.js";import{C as S,a as _,A as w,b as L,B as u}from"./createSvgIcon-DaBVc0yv.js";import{C as N}from"./CardActions-BYykoDAj.js";import"./createSvgIcon-aatpwmh3.js";function q(){const[s]=f(),[t,p]=o.useState(0),[g,l]=o.useState(!1),r=s.get("version"),m=s.get("releaseName"),h=s.get("releaseNotes"),{themeStretch:x}=j(),{enqueueSnackbar:d}=k(),{translate:n}=v();return o.useEffect(()=>{C.get("/api/v1/settings").then(a=>{}),i.on("update",async a=>{switch(console.log(a),a.type){case"show_snackbar":d(a.payload.message,{variant:a.payload.variant});break;case"update_progress":p(a.payload.progress);break;case"show_loading":l(!0);break;case"hide_loading":l(!1);break;default:console.log(a);break}})},[d]),e.jsxs(P,{title:`${n("Update")} | Lumi`,children:[g&&e.jsx(c,{}),t>0&&t<100&&e.jsx(c,{variant:"determinate",value:t}),e.jsxs(b,{maxWidth:x?!1:"lg",children:[r!=="undefined"&&e.jsxs(S,{children:[e.jsx(_,{avatar:e.jsx(w,{children:e.jsx(y,{})}),title:m||`v${r}`,subheader:`v${r}`}),e.jsx(L,{children:h}),e.jsx(N,{style:{padding:"20px"},children:e.jsx(u,{style:{marginLeft:"auto"},variant:"outlined",onClick:()=>{i.emit("update_install")},children:n("Install now")})})]}),e.jsx(u,{onClick:()=>i.emit("update_check"),children:n("Check for updates")})]})]})}export{q as default};

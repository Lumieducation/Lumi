import{as as f,R as o,a1 as j,y as k,x as C,$ as v,z as i,j as e,at as c,a2 as b}from"./index-Bo7DYx6r.js";import{d as y}from"./Update-BaMGwuWZ.js";import{P}from"./page-DHSTwrvH.js";import{C as S,a as _,B as u}from"./createSvgIcon-CuCcJlfy.js";import{C as w,A as L}from"./CardHeader-C6i98x8p.js";import{C as N}from"./CardActions-BRiVrLdl.js";import"./createSvgIcon-ofAx2bUa.js";function z(){const[s]=f(),[t,p]=o.useState(0),[m,l]=o.useState(!1),r=s.get("version"),g=s.get("releaseName"),h=s.get("releaseNotes"),{themeStretch:x}=j(),{enqueueSnackbar:d}=k(),{translate:n}=C();return o.useEffect(()=>{v.get("/api/v1/settings").then(a=>{}),i.on("update",async a=>{switch(console.log(a),a.type){case"show_snackbar":d(a.payload.message,{variant:a.payload.variant});break;case"update_progress":p(a.payload.progress);break;case"show_loading":l(!0);break;case"hide_loading":l(!1);break;default:console.log(a);break}})},[d]),e.jsxs(P,{title:`${n("Update")} | Lumi`,children:[m&&e.jsx(c,{}),t>0&&t<100&&e.jsx(c,{variant:"determinate",value:t}),e.jsxs(b,{maxWidth:x?!1:"lg",children:[r!=="undefined"&&e.jsxs(S,{children:[e.jsx(w,{avatar:e.jsx(L,{children:e.jsx(y,{})}),title:g||`v${r}`,subheader:`v${r}`}),e.jsx(_,{children:h}),e.jsx(N,{style:{padding:"20px"},children:e.jsx(u,{style:{marginLeft:"auto"},variant:"outlined",onClick:()=>{i.emit("update_install")},children:n("Install now")})})]}),e.jsx(u,{onClick:()=>i.emit("update_check"),children:n("Check for updates")})]})]})}export{z as default};

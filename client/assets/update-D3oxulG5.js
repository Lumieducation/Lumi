import{I as C,H as b,s as j,_ as m,r as v,u as y,b as S,j as s,d as k,e as _,al as A,R as p,ae as P,l as w,i as N,ac as R,o as g,am as x,af as L}from"./index-Di3PeBCJ.js";import{C as U,a as M,A as E,d as I,b as $,B as f}from"./Update-DLjy1MPQ.js";import{P as B}from"./page-T8I4Upay.js";import"./createSvgIcon-xXye_9m9.js";function H(e){return C("MuiCardActions",e)}b("MuiCardActions",["root","spacing"]);const T=["disableSpacing","className"],W=e=>{const{classes:a,disableSpacing:t}=e;return _({root:["root",!t&&"spacing"]},H,a)},q=j("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,!t.disableSpacing&&a.spacing]}})(({ownerState:e})=>m({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),z=v.forwardRef(function(a,t){const o=y({props:a,name:"MuiCardActions"}),{disableSpacing:i=!1,className:n}=o,l=S(o,T),c=m({},o,{disableSpacing:i}),d=W(c);return s.jsx(q,m({className:k(d.root,n),ownerState:c,ref:t},l))});function K(){const[e]=A(),[a,t]=p.useState(0),[o,i]=p.useState(!1),n=e.get("version"),l=e.get("releaseName"),c=e.get("releaseNotes"),{themeStretch:d}=P(),{enqueueSnackbar:h}=w(),{translate:u}=N();return p.useEffect(()=>{R.get("/api/v1/settings").then(r=>{}),g.on("update",async r=>{switch(console.log(r),r.type){case"show_snackbar":h(r.payload.message,{variant:r.payload.variant});break;case"update_progress":t(r.payload.progress);break;case"show_loading":i(!0);break;case"hide_loading":i(!1);break;default:console.log(r);break}})},[h]),s.jsxs(B,{title:`${u("Update")} | Lumi`,children:[o&&s.jsx(x,{}),a>0&&a<100&&s.jsx(x,{variant:"determinate",value:a}),s.jsxs(L,{maxWidth:d?!1:"lg",children:[n!=="undefined"&&s.jsxs(U,{children:[s.jsx(M,{avatar:s.jsx(E,{children:s.jsx(I,{})}),title:l||`v${n}`,subheader:`v${n}`}),s.jsx($,{children:c}),s.jsx(z,{style:{padding:"20px"},children:s.jsx(f,{style:{marginLeft:"auto"},variant:"outlined",onClick:()=>{g.emit("update_install")},children:u("Install now")})})]}),s.jsx(f,{onClick:()=>g.emit("update_check"),children:u("Check for updates")})]})]})}export{K as default};

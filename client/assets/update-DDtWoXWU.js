import{al as f,R as o,V as j,y as k,x as v,Q as C,z as l,j as e,am as c,W as b}from"./index-CP8hpHP7.js";import{C as y,A as P,d as S}from"./Update-BUVWcTGl.js";import{P as _}from"./page-BcY2vhkJ.js";import{C as w,a as L,b as N,B as u}from"./createSvgIcon-DB2rQsx9.js";import"./createSvgIcon-shvhigSM.js";function U(){const[s]=f(),[t,p]=o.useState(0),[g,i]=o.useState(!1),r=s.get("version"),m=s.get("releaseName"),h=s.get("releaseNotes"),{themeStretch:x}=j(),{enqueueSnackbar:d}=k(),{translate:n}=v();return o.useEffect(()=>{C.get("/api/v1/settings").then(a=>{}),l.on("update",async a=>{switch(console.log(a),a.type){case"show_snackbar":d(a.payload.message,{variant:a.payload.variant});break;case"update_progress":p(a.payload.progress);break;case"show_loading":i(!0);break;case"hide_loading":i(!1);break;default:console.log(a);break}})},[d]),e.jsxs(_,{title:`${n("Update")} | Lumi`,children:[g&&e.jsx(c,{}),t>0&&t<100&&e.jsx(c,{variant:"determinate",value:t}),e.jsxs(b,{maxWidth:x?!1:"lg",children:[r!=="undefined"&&e.jsxs(w,{children:[e.jsx(y,{avatar:e.jsx(P,{children:e.jsx(S,{})}),title:m||`v${r}`,subheader:`v${r}`}),e.jsx(L,{children:h}),e.jsx(N,{style:{padding:"20px"},children:e.jsx(u,{style:{marginLeft:"auto"},variant:"outlined",onClick:()=>{l.emit("update_install")},children:n("Install now")})})]}),e.jsx(u,{onClick:()=>l.emit("update_check"),children:n("Check for updates")})]})]})}export{U as default};

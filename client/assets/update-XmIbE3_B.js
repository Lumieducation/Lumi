import{I as f,H as b,s as j,_ as m,r as v,u as k,b as y,j as s,d as S,e as _,ak as A,R as p,ad as P,l as w,i as N,o as g,al as x,ae as R}from"./index-D-fBpMpD.js";import{s as L,C as U,a as M,A as E,d as I,b as $,B as C}from"./Update-C7dSTpOv.js";import{P as B}from"./page-CSQq76u2.js";import"./createSvgIcon-BIQg_dBO.js";function H(e){return f("MuiCardActions",e)}b("MuiCardActions",["root","spacing"]);const T=["disableSpacing","className"],W=e=>{const{classes:a,disableSpacing:t}=e;return _({root:["root",!t&&"spacing"]},H,a)},q=j("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,!t.disableSpacing&&a.spacing]}})(({ownerState:e})=>m({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),z=v.forwardRef(function(a,t){const o=k({props:a,name:"MuiCardActions"}),{disableSpacing:i=!1,className:n}=o,c=y(o,T),l=m({},o,{disableSpacing:i}),d=W(l);return s.jsx(q,m({className:S(d.root,n),ownerState:l,ref:t},c))});function K(){const[e]=A(),[a,t]=p.useState(0),[o,i]=p.useState(!1),n=e.get("version"),c=e.get("releaseName"),l=e.get("releaseNotes"),{themeStretch:d}=P(),{enqueueSnackbar:h}=w(),{translate:u}=N();return p.useEffect(()=>{L.get("/api/v1/settings").then(r=>{}),g.on("update",async r=>{switch(console.log(r),r.type){case"show_snackbar":h(r.payload.message,{variant:r.payload.variant});break;case"update_progress":t(r.payload.progress);break;case"show_loading":i(!0);break;case"hide_loading":i(!1);break;default:console.log(r);break}})},[h]),s.jsxs(B,{title:`${u("Update")} | Lumi`,children:[o&&s.jsx(x,{}),a>0&&a<100&&s.jsx(x,{variant:"determinate",value:a}),s.jsxs(R,{maxWidth:d?!1:"lg",children:[n!=="undefined"&&s.jsxs(U,{children:[s.jsx(M,{avatar:s.jsx(E,{children:s.jsx(I,{})}),title:c||`v${n}`,subheader:`v${n}`}),s.jsx($,{children:l}),s.jsx(z,{style:{padding:"20px"},children:s.jsx(C,{style:{marginLeft:"auto"},variant:"outlined",onClick:()=>{g.emit("update_install")},children:u("Install now")})})]}),s.jsx(C,{onClick:()=>g.emit("update_check"),children:u("Check for updates")})]})]})}export{K as default};

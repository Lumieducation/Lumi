import{al as f,R as o,V as j,y as k,x as C,Q as v,z as l,j as e,am as c,W as b}from"./index-CxwoOFDi.js";import{C as y,A as P,d as S}from"./Update-C0rqtRSY.js";import{P as _}from"./page-ucUz4Xqu.js";import{C as w,a as L,B as u}from"./createSvgIcon-DmolBdeO.js";import{C as N}from"./CardActions-BzLluj0P.js";import"./createSvgIcon-DzNjJkBI.js";function W(){const[s]=f(),[t,p]=o.useState(0),[m,i]=o.useState(!1),r=s.get("version"),g=s.get("releaseName"),h=s.get("releaseNotes"),{themeStretch:x}=j(),{enqueueSnackbar:d}=k(),{translate:n}=C();return o.useEffect(()=>{v.get("/api/v1/settings").then(a=>{}),l.on("update",async a=>{switch(console.log(a),a.type){case"show_snackbar":d(a.payload.message,{variant:a.payload.variant});break;case"update_progress":p(a.payload.progress);break;case"show_loading":i(!0);break;case"hide_loading":i(!1);break;default:console.log(a);break}})},[d]),e.jsxs(_,{title:`${n("Update")} | Lumi`,children:[m&&e.jsx(c,{}),t>0&&t<100&&e.jsx(c,{variant:"determinate",value:t}),e.jsxs(b,{maxWidth:x?!1:"lg",children:[r!=="undefined"&&e.jsxs(w,{children:[e.jsx(y,{avatar:e.jsx(P,{children:e.jsx(S,{})}),title:g||`v${r}`,subheader:`v${r}`}),e.jsx(L,{children:h}),e.jsx(N,{style:{padding:"20px"},children:e.jsx(u,{style:{marginLeft:"auto"},variant:"outlined",onClick:()=>{l.emit("update_install")},children:n("Install now")})})]}),e.jsx(u,{onClick:()=>l.emit("update_check"),children:n("Check for updates")})]})]})}export{W as default};
